import * as React from 'react'
import Inspector from '../Inspector'

type State = {
  expandedPaths: string[]
}

class ValueInspector extends React.Component<
  {
    value: any
    small?: boolean
  },
  State
> {
  state = {
    expandedPaths: [],
  }
  onToggleExpand = (path) => {
    const pathString = path.join('')

    if (this.state.expandedPaths.includes(pathString)) {
      this.setState({
        expandedPaths: this.state.expandedPaths.filter(
          (currentPath) => currentPath !== pathString
        ),
      })
    } else {
      this.setState({
        expandedPaths: this.state.expandedPaths.concat(pathString),
      })
    }
  }
  render() {
    return (
      <Inspector
        value={this.props.value}
        expandedPaths={this.state.expandedPaths}
        onToggleExpand={this.onToggleExpand}
        small={this.props.small}
      />
    )
  }
}

export default ValueInspector
